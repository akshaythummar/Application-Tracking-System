"use strict";(self.webpackChunkfinal_project_structure=self.webpackChunkfinal_project_structure||[]).push([[190],{8190:(F,p,r)=>{r.r(p),r.d(p,{CustomRolesModule:()=>T});var d=r(6895),u=r(9299),t=r(4650),f=r(7009),_=r(529);let M=(()=>{class n{constructor(e){this.http=e}getRoles(){return this.http.get("http://192.168.102.92:8002/main/api/admin/getAllRole")}getPermisson(){return this.http.get("http://192.168.102.92:8002/main/api/admin/getAllPermission")}setRoles(e){return this.http.post("http://192.168.102.92:8002/main/api/admin/addRole",e)}updateRoles(e){return this.http.post("http://192.168.102.92:8002/main/api/admin/updateRole",e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(_.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=r(7392),g=r(7957),O=r(3238),h=r(3546),b=r(6709),m=r(7331),C=r(9549);const v=["roleInput"],P=["check"];function R(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip-row",25),t.NdJ("removed",function(){const a=t.CHM(e).$implicit,c=t.oxw().index,l=t.oxw();return t.KtG(l.remove(a,c))}),t._uU(1),t.ALo(2,"titlecase"),t.TgZ(3,"button",26)(4,"mat-icon"),t._uU(5,"cancel"),t.qZA()()()}if(2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,e.name)," "),t.xp6(2),t.uIk("aria-label","remove "+e)}}function w(n,i){if(1&n&&(t.TgZ(0,"mat-option",27),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.name)," ")}}function A(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",11,12)(2,"mat-card",13)(3,"mat-card-content")(4,"span"),t._uU(5,"User"),t.qZA(),t.TgZ(6,"span",14),t._uU(7),t.ALo(8,"uppercase"),t.qZA(),t._UZ(9,"br")(10,"br"),t.TgZ(11,"span"),t._uU(12,"Permissions"),t.qZA(),t._UZ(13,"br")(14,"br"),t.TgZ(15,"form",15)(16,"mat-form-field",16)(17,"mat-label"),t._uU(18),t.qZA(),t.TgZ(19,"mat-chip-grid",17,18),t.YNc(21,R,6,4,"mat-chip-row",19),t.qZA(),t._UZ(22,"input",20,21),t.TgZ(24,"mat-autocomplete",22,23),t.NdJ("optionSelected",function(s){const c=t.CHM(e).index,l=t.oxw();return t.KtG(l.selected(s,c))}),t.YNc(26,w,3,4,"mat-option",24),t.qZA()()()()()()}if(2&n){const e=i.$implicit,o=t.MAs(20),s=t.MAs(25),a=t.oxw();t.xp6(7),t.Oqu(t.lcZ(8,6,e.rolename)),t.xp6(11),t.hij("",e.rolename," Permissions"),t.xp6(3),t.Q6J("ngForOf",e.permissions),t.xp6(1),t.Q6J("matChipInputFor",o)("matAutocomplete",s),t.xp6(4),t.Q6J("ngForOf",a.managePermissions)}}function D(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",28,29)(2,"mat-card")(3,"mat-card-content")(4,"label",30,31),t._uU(6),t.ALo(7,"titlecase"),t.qZA(),t.TgZ(8,"mat-checkbox",32,33),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.MAs(9),l=t.oxw();return t.KtG(l.getData(a.id,a.name,c))}),t.qZA()()()()}if(2&n){const e=i.$implicit;t.xp6(6),t.Oqu(t.lcZ(7,1,e.name))}}const Z=[{path:"",component:(()=>{class n{constructor(e,o){this._snackBar=e,this.passDataroles=o,this.selectedOptions=[]}ngOnInit(){let e=this.passDataroles.getPermisson().subscribe({next:o=>{this.managePermissions=o},error:o=>{e.unsubscribe(),console.log(o.message)},complete:()=>{e.unsubscribe()}});this.getRolesData()}openSnackBar(e){this._snackBar.open(e,"",{duration:2e3})}getData(e,o,s){0==s.checked?this.selectedOptions=this.selectedOptions.filter(a=>a.id!==e):this.selectedOptions.push({id:e,name:o})}getValue(e,o){for(let a of this.rolesData)if(a.rolename.toLowerCase().trim().split(" ").join("")==e.value.toLowerCase().trim().split(" ").join(""))return void this.openSnackBar("Role Already Exist");let s=this.passDataroles.setRoles({rolename:e.value,permissions:this.selectedOptions}).subscribe({next:()=>{console.log("Successfully Added")},error:a=>{s.unsubscribe(),console.log(a.message)},complete:()=>{s.unsubscribe()}});this.openSnackBar("Roles Added"),e.value="",o.disabled=!0,setTimeout(()=>{this.getRolesData()},1500)}getRolesData(){let e=this.passDataroles.getRoles().subscribe({next:o=>{this.rolesData=o},error:o=>{e.unsubscribe(),console.log(o.message)},complete:()=>{e.unsubscribe()}})}enable(e,o){e.disabled=""==o}remove(e,o){const s=this.rolesData[o].permissions.indexOf(e);if(s>=0){this.rolesData[o].permissions.splice(s,1);let a=this.passDataroles.updateRoles({id:this.rolesData[o].id,rolename:this.rolesData[o].rolename,permissions:this.rolesData[o].permissions}).subscribe({next:()=>{console.log("Successfully Updated")},error:c=>{a.unsubscribe(),console.log(c.message)},complete:()=>{a.unsubscribe()}})}}selected(e,o){let s=!0;for(let a of this.rolesData[o].permissions)e.option.viewValue.toLowerCase()==a.name.toLowerCase()&&(s=!1);if(1==s){this.rolesData[o].permissions.push({id:e.option.value.id,name:e.option.value.name}),this.roleInput.nativeElement.value="",console.log(this.rolesData[o]);let a=this.passDataroles.updateRoles({id:this.rolesData[o].id,rolename:this.rolesData[o].rolename,permissions:this.rolesData[o].permissions}).subscribe({next:()=>{console.log("Successfully Updated")},error:c=>{a.unsubscribe(),console.log(c.message)},complete:()=>{a.unsubscribe()}})}}unchecked(){let e=this.myCheckboxes.toArray();for(let o=0;o<e.length;o++)e[o].checked=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.ux),t.Y36(M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-custom-roles"]],viewQuery:function(e,o){if(1&e&&(t.Gf(v,5),t.Gf(P,5)),2&e){let s;t.iGM(s=t.CRH())&&(o.roleInput=s.first),t.iGM(s=t.CRH())&&(o.myCheckboxes=s)}},decls:19,vars:2,consts:[[1,"container"],[1,"heading"],[1,"roles"],["id","data",4,"ngFor","ngForOf"],[1,"inputCard"],["id","matcontentsize"],["matInpt","","placeholder","Enter Roles ",1,"no-outline",3,"input"],["name",""],["class","spacing","id","roleDetail",4,"ngFor","ngForOf"],["id","addRoles","disabled","",3,"click"],["btn",""],["id","data"],["role",""],["id","showData"],["id","userName"],["id","formdata"],["appearance","fill",1,"example-chip-list"],["aria-label","Role selection"],["chipGrid",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","New Role...",3,"matChipInputFor","matAutocomplete"],["roleInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove","","id","chip"],[3,"value"],["id","roleDetail",1,"spacing"],["div",""],["for","Manage Streams",1,"adjustalign"],["label",""],["id","checkbox","color","primary",3,"click"],["check",""]],template:function(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"h2")(3,"span"),t._uU(4,"admin >"),t.qZA(),t._uU(5," Custom Roles"),t.qZA(),t._UZ(6,"hr"),t.qZA(),t.TgZ(7,"div",2),t.YNc(8,A,27,8,"div",3),t.TgZ(9,"div",4)(10,"mat-card",5)(11,"mat-card-content")(12,"input",6,7),t.NdJ("input",function(){t.CHM(s);const c=t.MAs(17),l=t.MAs(13);return t.KtG(o.enable(c,l.value))}),t.qZA()()()(),t.YNc(14,D,10,3,"div",8),t._UZ(15,"br"),t.TgZ(16,"Button",9,10),t.NdJ("click",function(){t.CHM(s);const c=t.MAs(13),l=t.MAs(17);return o.getValue(c,l),t.KtG(o.unchecked())}),t._uU(18,"Add Roles"),t.qZA()()()}2&e&&(t.xp6(8),t.Q6J("ngForOf",o.rolesData),t.xp6(6),t.Q6J("ngForOf",o.managePermissions))},dependencies:[d.sg,x.Hw,g.XC,O.ey,g.ZL,h.a8,h.dn,b.oG,m.RA,m.oH,m.qH,m.z3,C.KE,C.hX,d.gd,d.rS],styles:["body[_ngcontent-%COMP%]{background-color:var(--background-color)}.heading[_ngcontent-%COMP%]{margin-bottom:2rem}.container[_ngcontent-%COMP%]{padding:0rem 2rem 3rem;background-color:var(--background-color);height:100vh;position:relative;overflow:hidden}h2[_ngcontent-%COMP%]{padding:1rem;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;color:#012970}span[_ngcontent-%COMP%]{color:#6a6969}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:5px;font-weight:700;font-size:20px;color:var(--main-color)}mat-card[_ngcontent-%COMP%]{margin-left:30px;background-color:var(--div-color);box-shadow:var(--box-shadow);overflow:hidden}mat-sidenav-container[_ngcontent-%COMP%]{overflow:hidden}.header[_ngcontent-%COMP%]{padding:20px;overflow:hidden}.roles[_ngcontent-%COMP%]{padding:0 20px 20px;height:-moz-fit-content;height:fit-content;overflow:hidden}Button[_ngcontent-%COMP%]:not(#chip){border-radius:30px;box-shadow:var(--box-shadow);background-color:var(--main-color);color:#f5f5f5;cursor:pointer}#data[_ngcontent-%COMP%]   #showData[_ngcontent-%COMP%]{width:50%;float:right;margin:0 0 20px 20px}#userName[_ngcontent-%COMP%]{margin:30px}#showData[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], [appearance=fill][_ngcontent-%COMP%]{margin-left:50px}#data[_ngcontent-%COMP%]   #showData[_ngcontent-%COMP%]   #formdata[_ngcontent-%COMP%]{margin-left:-50px;display:flex;flex-direction:column}[placeholder][_ngcontent-%COMP%]{background-color:inherit}input[_ngcontent-%COMP%]{border:hidden;padding-top:15px;width:45%;font-size:18px;font-weight:700;background-color:var(--div-color);color:var(--text-color)}.no-outline[_ngcontent-%COMP%]:focus{border-bottom-style:groove;border-bottom:4px solid #e5e5e5;outline:none;animation:_ngcontent-%COMP%_line .5s;border-color:#7887f5}@keyframes _ngcontent-%COMP%_line{0%{width:0px}to{width:40%}}.inputCard[_ngcontent-%COMP%]   #matcontentsize[_ngcontent-%COMP%]{width:44.7%}.adjustalign[_ngcontent-%COMP%]{margin-top:10px;font-size:large}.spacing[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]:hover{transition:scale 1s ease;box-shadow:var(--box-shadow)}.spacing[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:45%}.spacing[_ngcontent-%COMP%]{margin:10px 10px 10px 0}#addRoles[_ngcontent-%COMP%]{font-size:25px;margin-left:280px;width:10%;height:2em}#checkbox[_ngcontent-%COMP%]{float:right}@media only screen and (width<1510px){#data[_ngcontent-%COMP%]{display:flex;flex-direction:column}#data[_ngcontent-%COMP%]   #showData[_ngcontent-%COMP%]{width:100%}#data[_ngcontent-%COMP%]{margin-right:20px;margin-left:15px}#roleDetail[_ngcontent-%COMP%], .inputCard[_ngcontent-%COMP%]{margin-right:30px}.inputCard[_ngcontent-%COMP%]   #matcontentsize[_ngcontent-%COMP%]{width:100%;margin-top:10px}.roles[_ngcontent-%COMP%]   #roleDetail[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:100%}#addRoles[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;border-radius:none;padding:10px}}@media only screen and (width<1000px){#addRoles[_ngcontent-%COMP%]{margin-left:30px;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;font-size:20px}}@media only screen and (width<650px){[appearance][_ngcontent-%COMP%]{margin:0}#data[_ngcontent-%COMP%]   #showData[_ngcontent-%COMP%]   #userName[_ngcontent-%COMP%]{display:block;margin:10px}#data[_ngcontent-%COMP%]   #showData[_ngcontent-%COMP%]   [appearance][_ngcontent-%COMP%]{display:block}#data[_ngcontent-%COMP%]   #showData[_ngcontent-%COMP%]   #userName[_ngcontent-%COMP%]{margin-top:20px;margin-left:0}#data[_ngcontent-%COMP%]   #showData[_ngcontent-%COMP%]   #formdata[_ngcontent-%COMP%]{margin-top:20px;margin-left:auto}}@media only screen and (width<432px){.roles[_ngcontent-%COMP%]{padding:0}}"]}),n})()}];let y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.Bz.forChild(Z),u.Bz]}),n})();var k=r(8807);let T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,y,k.Q]}),n})()}}]);